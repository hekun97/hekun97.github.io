---
icon: pen-to-square
category:
  - JMeter
tag:
  - Controller
  - Switch
order: -12
sticky: true
---



# 详解 Switch Controller 开关控制器

## 简单介绍

控制哪个子项将被执行，学过 java 的同学应该很清楚 switch 是做么该的

 

## Switch 控制器

[![img](/assets/jmeter/1896874-20200824114839253-2005724007.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824114839253-2005724007.png)

 

## Switch 控制器界面介绍

[![img](/assets/jmeter/1896874-20200824114843636-1200274616.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824114843636-1200274616.png)

#### Switch value

- 既可以是下标值，也可以是名称
- 如果是下标值，则从 0 开始
- 如果下标值**超出范围**，它将运行第 0 个元素，因此它是数字情况的默认值
- 如果下标值值是**空字符串**，它还将运行第零个元素
- 如果该值是**非数字（非空）**，则 Switch 控制器将查找具有**相同名称**的子项（区分大小写）
- 如果两个名称都不匹配，则选择名为 **default**（大小写无关）的元素
- 如果没有默认值 **default**，则不会选择任何元素，并且控制器将不会运行任何内容

 

## 有效下标值的栗子

#### 线程组结构树

[![img](/assets/jmeter/1896874-20200824121529058-1289978363.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824121529058-1289978363.png)

后面的线程组基本都是这个，有变化再单独显示出来

 

#### switch 控制器

[![img](/assets/jmeter/1896874-20200824121535107-420748134.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824121535107-420748134.png)

通过随机产生 0-2 的数字来选择执行哪个 sampler

 

#### 查看结果树

[![img](/assets/jmeter/1896874-20200824121556607-849931719.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824121556607-849931719.png)

跑了 3 次，每次都不一样

 

## 超出下标值范围的栗子

#### switch 控制器

[![img](/assets/jmeter/1896874-20200824124425128-1922579722.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824124425128-1922579722.png)

最大是 2，现在是 4，超出范围值

 

#### 查看结果树

[![img](/assets/jmeter/1896874-20200824124439511-873948014.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824124439511-873948014.png)

只运行第一个子项

 

## 空字符串的栗子

#### switch 控制器

[![img](/assets/jmeter/1896874-20200824124453800-906549118.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824124453800-906549118.png)

不传值

 

#### 查看结果树

[![img](/assets/jmeter/1896874-20200824124439511-873948014.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824124439511-873948014.png)

只运行第一个子项

 

## 名称的栗子

#### switch 控制器

[![img](/assets/jmeter/1896874-20200824124539327-391946004.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824124539327-391946004.png)

 

#### 查看结果树

[![img](/assets/jmeter/1896874-20200824124547571-1792687146.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824124547571-1792687146.png)

名称匹配上了，所以只运行它

 

## default 的栗子

#### 线程组结构树

[![img](/assets/jmeter/1896874-20200824130904138-1026342624.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824130904138-1026342624.png)

 

#### switch 控制器

[![img](/assets/jmeter/1896874-20200824124539327-391946004.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824124539327-391946004.png)

 

#### 查看结果树

[![img](/assets/jmeter/1896874-20200824130908777-1312614847.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824130908777-1312614847.png)

 

## 不运行的栗子

#### 线程组结构树

[![img](/assets/jmeter/1896874-20200824121529058-1289978363.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824121529058-1289978363.png)

 

#### switch 控制器

[![img](/assets/jmeter/1896874-20200824131016153-1342338005.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200824131016153-1342338005.png)

 

#### 查看结果树

不会执行子项