---
icon: pen-to-square
category:
  - JMeter
tag:
  - Controller
  - Weight
order: -5
sticky: true
---



# 详解 Weighted Switch Controller 权重控制器

## 简单介绍

- 它能分配其子项目（Child Item）的权重，从而控制子项的执行概率
- 它是一个插件，需要额外下载哦

 

#### 插件下载地址

https://jmeter-plugins.org/ 

 

## 权重控制器

[![img](/assets/jmeter/1896874-20200821120821010-928828860.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821120821010-928828860.png)

 

## 权重控制器界面介绍

[![img](/assets/jmeter/1896874-20200821120827516-1810989412.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821120827516-1810989412.png)

- **Random choice：**勾选后，会随机选一个子项执行，不能保证子项执行的实际百分比等于预期值
- **Child Item Weights：**只要添加到该控制器下的子项（取样器、逻辑控制器）都会显示在这里
- **weight：**可以是任意数字，然后会按照比例去控制子项的执行概率 

 

## 简单的栗子

#### 线程组结构树

[![img](/assets/jmeter/1896874-20200821121401972-220532939.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821121401972-220532939.png)

 

 

#### 线程组属性

[![img](/assets/jmeter/1896874-20200821121407085-241716720.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821121407085-241716720.png)

一共循环 80 次 

 

#### 权重控制器

[![img](/assets/jmeter/1896874-20200821121415651-17196311.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821121415651-17196311.png)

相当于 1:3 的比例来分配

 

#### 查看聚合报告

[![img](/assets/jmeter/1896874-20200821121423829-63880324.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821121423829-63880324.png)

这个权重是精确控制的 

 

## 勾上 Random choice 的栗子

#### 线程组结构树 

[![img](/assets/jmeter/1896874-20200821121448612-1611567807.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821121448612-1611567807.png)

 

#### 线程组属性

[![img](/assets/jmeter/1896874-20200821121434287-741682380.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821121434287-741682380.png)

一共循环 80 次 

 

#### 权重控制器

[![img](/assets/jmeter/1896874-20200821121441156-1693186750.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821121441156-1693186750.png)

相当于 1:3 的比例来分配 

 

#### 查看聚合报告

[![img](/assets/jmeter/1896874-20200821121500335-364053609.png)](https://img2020.cnblogs.com/blog/1896874/202008/1896874-20200821121500335-364053609.png)

这个权重是会有点偏差的，因为会随机选择一个子项执行