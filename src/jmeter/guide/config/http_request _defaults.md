---
icon: pen-to-square
category:
  - JMeter
tag:
  - Request
  - Config
order: 6
sticky: true
---

# HTTP请求默认值

## HTTP 请求默认值界面介绍

![img](/assets/jmeter/1896874-20200619145213878-1405545719.png)

乍眼一看，其实跟 HTTP Request 的界面基本一样，少了一点点东西而已，所以这里就不介绍每个字段的含义了，来说下注意事项

 

### 重点

- HTTP 请求默认值可以直接添加到**线程组下面**，也可以添加到某个 **HTTP 请求下面**
- 如果是在线程组下的 HTTP 请求默认值，那么它的**作用域**就是该线程组下的**所有 HTTP 请求**，包括子级、孙子级、孙孙子级的 HTTP 请求
- 如果实在某个 HTTP 请求下的 HTTP 请求默认值，那么它的**作用域**就只针对**这个 HTTP 请求**
- 线程组的 HTTP 请求默认值的**优先级小于**HTTP 请求下的 HTTP请求默认值
- 当然啦，所有 HTTP 请求默认值的**优先级**都比 HTTP 请求**低**

 

**光理论很难理解，我们来看个栗子**

 

#### 测试计划树结构

![img](/assets/jmeter/1896874-20200619170035741-211879123.png)

一个线程组下的 HTTP 请求默认值（1），两个 HTTP 请求下的HTTP 请求默认值（2、3）

 

#### 第一个 HTTP 请求默认填写的内容

![img](/assets/jmeter/1896874-20200619170203597-560392654.png)

**设置了：**协议、host、端口、编码、参数

 

#### 第二个 HTTP 请求默认填写的内容

![img](/assets/jmeter/1896874-20200619170208764-566188583.png)

**设置了：**host、端口、路径

 

#### 第三个 HTTP 请求默认填写的内容

![img](/assets/jmeter/1896874-20200619171023883-268065223.png)

**设置了：**host、编码、参数列表

 

#### 看看 Flask-json 的请求体和响应体吧



![img](/assets/jmeter/1896874-20200619171015313-1951661200.png)

 

**可以看到**

- **【\**2--请求默认值\**】**里设置的host、端口、路径把**【\**1--请求默认值\**】**设置的**覆盖掉了**
- 又因为**【\**\*\*1--请求默认值\*\**\*】**设置了编码和参数列表，而**【2--请求默认值】**没有设置，所以直接拿了**【\**1--请求默认值\**】**的值
- 但有个问题，HTTP 请求本身有设置请求数据（JSON），**请求数据是不会被覆盖的**，而会把**【\**1--请求默认值\**】**的参数列表和 JSON 数据**拼接**在一起，拼接后的数据结构是错误的，所以请求会报错
- 即使 HTTP 请求默认值里面设置的是 JSON 数据，也不会合二为一，仍然会报错（如下图）

![img](/assets/jmeter/1896874-20200619174340385-1138571039.png)

 

#### 看看图片文件上传接口的请求体和响应体吧

![img](/assets/jmeter/1896874-20200619171018465-833785271.png)]

 

**可以看到**

- **【\**2--请求默认值\**】**里设置的host、编码把**【\**1--请求默认值\**】**设置的**覆盖掉了**
- 而这个 HTTP请求的请求数据是也是参数列表形式传参的，这样就可以拼接成功了
- 最终会把两个请求默认值的参数列表**拼接起来再传**递，即使参数名一样，仍然会分开传，而不是覆盖参数值（可见下面的扩展小栗子）

![img](/assets/jmeter/1896874-20200619173313604-117166962.png)

 

## 总结

HTTP 请求所需的各种**字段值**（host、端口、编码、请求数据等等），取值的顺序（优先级）是：

1. HTTP 请求本身设置的值
2. HTTP 请求下的 HTTP 请求默认值设置的值
3. 线程组下的 HTTP 请求默认值设置的值

 

#### 最后一句话

有多个 HTTP 请求默认值时，除了参数列表或请求体数据是会拼接之外，其他字段值的取值顺序就是按照上述的顺序来走的