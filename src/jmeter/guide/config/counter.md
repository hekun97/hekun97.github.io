---
icon: pen-to-square
category:
  - JMeter
tag:
  - counter
  - csv
order: -1
sticky: true
---



# 详解 Counter 计数器

## 简单介绍

- 计数器的作用：循环递增生成数字
- 计数器使用 long 来存储值，因此取值范围是 **-2 ^ 63** 到 **2 ^ 63-1** 
- 可以在线程组任意地方添加计数器

 

## 计数器

[![img](/assets/jmeter/1896874-20200625201757726-1437495883.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625201757726-1437495883.png)

 

## 计数器界面介绍

[![img](/assets/jmeter/1896874-20200625201806994-1957414503.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625201806994-1957414503.png)

 

#### 字段介绍

| 字段                                         | 含义                                 |
| -------------------------------------------- | ------------------------------------ |
| Starting value                               | 初始值，long 整型，默认 0            |
| Increment                                    | 每次迭代的递增值，默认 0，表示不增加 |
| Maximum value                                | 最大值，包含此值                     |
| Number format                                | 数字可选格式                         |
| Exported Variable Name                       | 引用名称                             |
| Track counter independently for rach user    | 每个用户都有一个独立的计数器         |
| Reset counter on each Thread Group Iteration | 每次线程组迭代时计数器将重置为初始值 |

 

## 最基础的栗子

只有计数器的情况下的栗子

### 线程组结构树

[![img](/assets/jmeter/1896874-20200625230817998-79278903.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625230817998-79278903.png)

 

### 线程组属性

[![img](/assets/jmeter/1896874-20200625231033309-147179514.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625231033309-147179514.png)

共有 15 个线程，模拟 15 个用户

 

### 计数器

[![img](/assets/jmeter/1896874-20200625230827935-1591747622.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625230827935-1591747622.png)

计数器最多循环计数 10 次

 

### 运行结果

[![img](/assets/jmeter/1896874-20200625231111507-1943328051.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625231111507-1943328051.png)

可以看到，因为有 15 个用户，但计数器最多循环计数 10 次，所以第一轮循环结束后会重头开始

 

## 计数器 + 循环控制器的栗子

### 线程组结构树

[![img](/assets/jmeter/1896874-20200625231321344-333362685.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625231321344-333362685.png)

 

### 线程组属性

[![img](/assets/jmeter/1896874-20200625231417910-1438600170.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625231417910-1438600170.png)

共有 5 个线程，模拟 5 个用户

 

### 循环控制器

[![img](/assets/jmeter/1896874-20200625231519882-778911139.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625231519882-778911139.png)

每个线程运行 3 次

 

### 计数器

[![img](/assets/jmeter/1896874-20200625231438389-1987346442.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625231438389-1987346442.png)

计数器最多循环计数 30 次

 

### 未勾选【与每用户独立的跟踪计数器】的运行结果

[![img](/assets/jmeter/1896874-20200625231629128-2079350171.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625231629128-2079350171.png)

可以看到

- 因为有 5 个线程，每个线程循环 3 次，一共 15 个请求，所以计数器是循环了 15 次
- 此时计数器是对**所有线程共享**的，属于线程组全局计数器，所以计数器是累计循环了 15 次

 

### 勾选【与每用户独立的跟踪计数器】的运行结果

[![img](/assets/jmeter/1896874-20200625231718371-1287559514.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200625231718371-1287559514.png)

可以看到

- 每个线程运行时，计数器都是从初始值算起的
- 此时计数器是**每个线程独享**的，不再是公共计数器，所以每次有**新的线程运行**时，都是新的计数器开始循环计数

 

## 计数器的一些注意事项

使用计数器生成的变量，值的类型为 string，所以有比较之类的操作时，需要带 "" 操作