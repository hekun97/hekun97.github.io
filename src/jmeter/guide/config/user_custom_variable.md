---
icon: pen-to-square
category:
  - JMeter
tag:
  - config
  - detail
order: 17
sticky: true
---

# 详解用户自定义变量

## 用户自定义变量

[![img](/assets/jmeter/1896874-20200622103023755-988297635.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200622103023755-988297635.png)

我们通过实际栗子去讲述理论知识点

 

## 测试计划树结构

[![img](/assets/jmeter/1896874-20200622103054121-1857264417.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200622103054121-1857264417.png)

 

## 测试计划

[![img](/assets/jmeter/1896874-20200622103205833-1419351530.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200622103205833-1419351530.png)

设置了一个变量 d1

 

## 线程组

[![img](/assets/jmeter/1896874-20200622103331897-889408369.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200622103331897-889408369.png)

模拟两个用户，各循环五次

 

## 线程组下的用户自定义变量

[![img](/assets/jmeter/1896874-20200622103411108-950346790.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200622103411108-950346790.png)

只设置了一个变量 d1

 

## HTTP 请求下的用户自定义变量

[![img](/assets/jmeter/1896874-20200622103455557-1197592421.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200622103455557-1197592421.png)

设置了两个变量 d1、d2

 

## Flask-json 请求

[![img](/assets/jmeter/1896874-20200622103422153-1233121653.png)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200622103422153-1233121653.png)

 

## 运行结果

[![img](/assets/jmeter/1896874-20200622103525746-147881303.gif)](https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200622103525746-147881303.gif)

共发送 10 个请求

 

## 知识点

- **线程组下**的用户自定义变量 **优先级高于** **测试计划**里的用户自定义变量
- **HTTP 请求下**的用户自定义变量 **优先级高于** **线程组下**的用户自定义变量 
- 若有**重名**变量，优先取优先级高的用户自定义变量
- 用户自定义变量在测试计划**运行后**，是**全局生效的且只生成一次**，它不是动态生成的；从测试结果可以看到，即使变量的值是随机数（Random），不同用户数循环多次，拿到的用户自定义变量值都是一样的
- **拓展：**如果想要每次用户自定义变量的值是动态生成的，可以使用**前置处理器-用户参数**，可参考：https://www.cnblogs.com/poloyy/p/13175865.html