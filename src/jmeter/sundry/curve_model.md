# 性能测试曲线模型

性能测试曲线模型是一条随着测试时间不断变化的曲线，与**服务器资源**、**用户数**或其他的性能指标密切相关的曲线。如下图所示。

![performance curve](https://hk-docs.oss-cn-chengdu.aliyuncs.com/SoftwareTest/InterfaceTest/202401251757064.png)

## 曲线图关键点

- **横轴**：从左到右表现了Number of Concurrent Users（并发用户数）的不断增长。
- **曲线**：
  - <font color=green>**Utilization(U)**</font>：资源的利用情况，包括硬件资源和软件资源；
  - <font color=Purple>**Throughput(X)**</font>：吞吐量，这里是指每秒事务数（TPS）；
  - <font color=blue>**Response Time(R)**</font>：响应时间。
- **区域**：
  - **Light Load** ：轻负载区
  - **Heavy Load** ：重负载区
  - **Buckle Zone**：塌陷区 。
- **关键点**：
  - **The Optimum Number of Concurrent Users**：最佳并发用户数
  - **The Maximum Number of Concurrent Users**：最大并发用户数

## 过程分析

1. **轻负载区**：随着并发用户数的增长，资源占用率和吞吐量（TPS）会相应的增长，但是响应时间（RT）基本平稳，小幅递增；
2. **最优负载（B点）**：此时是系统的最优负载，继续增加并发将进入重负载区；
3. **重负载区**：当并发用户数增长到一定程度后，资源占用达到饱和，吞吐量（TPS）增长明显放缓甚至停止增长，而响应时间（RT）却进一步延长。
4. **最大负载（C点）**：此时是系统的最大负载，继续增加并发将进入塌陷区；
5. **塌陷区**：如果并发用户数继续增长，软硬件资源占用继续维持在饱和状态，但是吞吐量（TPS）开始下降，响应时间（RT）急剧递增，明显的超出了用户可接受的范围，并且最终导致用户放弃了这次请求甚至离开。吞吐量下降，排队现象，服务器宕机，响应时间越来越大。

## 总结

1. 当系统的负载等于最佳并发用户数时，系统的整体效率最高，没有资源被浪费，用户也不需要等待；
2. 当系统负载处于最佳并发用户数和最大并发用户数之间时，系统可以继续工作，但是用户的等待时间延长，满意度开始降低，并且如果负载一直持续，将最终会导致有些用户无法忍受而放弃；
3. 当系统负载大于最大并发用户数时，将注定会导致某些用户无法忍受超长的响应时间而放弃。

::: tip

系统应按最优负载设计，并避免长时间在重负载区和进入塌陷区。

:::