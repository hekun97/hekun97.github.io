"use strict";(self.webpackChunkcaelis_terra=self.webpackChunkcaelis_terra||[]).push([[7702],{4195:(s,i,t)=>{t.r(i),t.d(i,{comp:()=>e,data:()=>h});var a=t(6254);const n={},e=(0,t(6995).A)(n,[["render",function(s,i){return(0,a.uX)(),(0,a.CE)("div",null,i[0]||(i[0]=[(0,a.Fv)('<h1 id="headless下浏览器窗口控制方法" tabindex="-1"><a class="header-anchor" href="#headless下浏览器窗口控制方法"><span>Headless下浏览器窗口控制方法</span></a></h1><p>在 <strong>Headless 模式（无头模式）</strong> 下，部分浏览器窗口控制方法的行为可能与常规模式不同。以下是具体差异的总结：</p><hr><h3 id="一、可能表现不同的方法" tabindex="-1"><a class="header-anchor" href="#一、可能表现不同的方法"><span><strong>一、可能表现不同的方法</strong></span></a></h3><table><thead><tr><th><strong>方法</strong></th><th><strong>常规模式行为</strong></th><th><strong>Headless 模式注意事项</strong></th></tr></thead><tbody><tr><td><code>maximize_window()</code></td><td>窗口最大化，显示地址栏和工具栏</td><td><strong>可能无效</strong>，部分驱动（如 Chrome）在 Headless 下默认以固定分辨率运行</td></tr><tr><td><code>set_window_size()</code></td><td>精确调整窗口尺寸</td><td><strong>受驱动限制</strong>，部分浏览器可能忽略或默认固定分辨率（如 Firefox Headless 默认 1366x768）</td></tr><tr><td><code>set_window_position()</code></td><td>调整窗口在屏幕中的位置</td><td><strong>通常无效</strong>，Headless 模式无实际屏幕坐标系统</td></tr><tr><td><code>fullscreen_window()</code></td><td>全屏隐藏浏览器 UI</td><td><strong>可能无效</strong>，无实际界面可操作</td></tr></tbody></table><hr><h3 id="二、headless-模式下的替代方案" tabindex="-1"><a class="header-anchor" href="#二、headless-模式下的替代方案"><span><strong>二、Headless 模式下的替代方案</strong></span></a></h3><h4 id="_1-固定分辨率设置" tabindex="-1"><a class="header-anchor" href="#_1-固定分辨率设置"><span><strong>1. 固定分辨率设置</strong></span></a></h4><p>通过浏览器选项直接指定 Headless 模式的分辨率：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> selenium </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> webdriver</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> selenium.webdriver.chrome.options </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Options</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">options </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">options.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">add_argument</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;--headless=new&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Chrome 112+ 推荐语法</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">options.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">add_argument</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;--window-size=1920,1080&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 强制指定分辨率</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">driver </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> webdriver.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Chrome</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">options</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">options)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-移动端模拟" tabindex="-1"><a class="header-anchor" href="#_2-移动端模拟"><span><strong>2. 移动端模拟</strong></span></a></h4><p>使用设备预设参数（非手动设尺寸）：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> selenium.webdriver.chrome.options </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Options</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mobile_emulation </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;deviceMetrics&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;width&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">375</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;height&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">812</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;pixelRatio&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">},</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;userAgent&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) ...&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">options </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> Options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">options.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">add_experimental_option</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;mobileEmulation&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, mobile_emulation)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">options.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">add_argument</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;--headless=new&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">driver </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> webdriver.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Chrome</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">options</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">options)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-截图与布局验证" tabindex="-1"><a class="header-anchor" href="#_3-截图与布局验证"><span><strong>3. 截图与布局验证</strong></span></a></h4><p>即使 Headless 模式窗口控制受限，仍可通过固定分辨率截屏：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">options.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">add_argument</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;--window-size=1920,1080&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">driver.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://example.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">driver.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">save_screenshot</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;headless_screenshot.png&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="三、浏览器差异" tabindex="-1"><a class="header-anchor" href="#三、浏览器差异"><span><strong>三、浏览器差异</strong></span></a></h3><table><thead><tr><th><strong>浏览器</strong></th><th><strong>Headless 模式行为</strong></th></tr></thead><tbody><tr><td><strong>Chrome</strong></td><td>支持 <code>--window-size</code> 参数，但 <code>maximize_window()</code> 无效</td></tr><tr><td><strong>Firefox</strong></td><td>默认分辨率 1366x768，<code>set_window_size()</code> 可能生效</td></tr><tr><td><strong>Edge</strong></td><td>同 Chrome</td></tr><tr><td><strong>Safari</strong></td><td>不支持 Headless 模式</td></tr></tbody></table><hr><h3 id="四、最佳实践" tabindex="-1"><a class="header-anchor" href="#四、最佳实践"><span><strong>四、最佳实践</strong></span></a></h3><ol><li><strong>优先通过浏览器选项设置分辨率</strong>：而非依赖 <code>set_window_size()</code>。</li><li><strong>避免依赖窗口位置</strong>：Headless 模式下无实际屏幕坐标系。</li><li><strong>明确测试目标</strong>：若需验证响应式布局，使用设备模拟参数而非手动调整窗口大小。</li></ol><p>掌握这些差异，可确保 Headless 模式测试的稳定性和一致性！ 🖥️🔧</p>',23)]))}]]),h=JSON.parse('{"path":"/auto/se/sundry/headless_diff.html","title":"Headless下浏览器窗口控制方法","lang":"zh-CN","frontmatter":{"description":"Headless下浏览器窗口控制方法 在 Headless 模式（无头模式） 下，部分浏览器窗口控制方法的行为可能与常规模式不同。以下是具体差异的总结： 一、可能表现不同的方法 二、Headless 模式下的替代方案 1. 固定分辨率设置 通过浏览器选项直接指定 Headless 模式的分辨率： 2. 移动端模拟 使用设备预设参数（非手动设尺寸）： 3...","head":[["meta",{"property":"og:url","content":"https://hekun97.github.io/auto/se/sundry/headless_diff.html"}],["meta",{"property":"og:site_name","content":"专业治头秃"}],["meta",{"property":"og:title","content":"Headless下浏览器窗口控制方法"}],["meta",{"property":"og:description","content":"Headless下浏览器窗口控制方法 在 Headless 模式（无头模式） 下，部分浏览器窗口控制方法的行为可能与常规模式不同。以下是具体差异的总结： 一、可能表现不同的方法 二、Headless 模式下的替代方案 1. 固定分辨率设置 通过浏览器选项直接指定 Headless 模式的分辨率： 2. 移动端模拟 使用设备预设参数（非手动设尺寸）： 3..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-12T16:59:19.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-12T16:59:19.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Headless下浏览器窗口控制方法\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-12T16:59:19.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"专业治头秃\\",\\"url\\":\\"https://github.com/hekun97\\"}]}"]]},"git":{"createdTime":1741798759000,"updatedTime":1741798759000,"contributors":[{"name":"hekun97","username":"hekun97","email":"hek97@qq.com","commits":1,"url":"https://github.com/hekun97"}]},"readingTime":{"minutes":1.74,"words":521},"filePathRelative":"auto/se/sundry/headless_diff.md","localizedDate":"2025年3月12日","excerpt":"\\n<p>在 <strong>Headless 模式（无头模式）</strong> 下，部分浏览器窗口控制方法的行为可能与常规模式不同。以下是具体差异的总结：</p>\\n<hr>\\n<h3><strong>一、可能表现不同的方法</strong></h3>\\n<table>\\n<thead>\\n<tr>\\n<th><strong>方法</strong></th>\\n<th><strong>常规模式行为</strong></th>\\n<th><strong>Headless 模式注意事项</strong></th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><code>maximize_window()</code></td>\\n<td>窗口最大化，显示地址栏和工具栏</td>\\n<td><strong>可能无效</strong>，部分驱动（如 Chrome）在 Headless 下默认以固定分辨率运行</td>\\n</tr>\\n<tr>\\n<td><code>set_window_size()</code></td>\\n<td>精确调整窗口尺寸</td>\\n<td><strong>受驱动限制</strong>，部分浏览器可能忽略或默认固定分辨率（如 Firefox Headless 默认 1366x768）</td>\\n</tr>\\n<tr>\\n<td><code>set_window_position()</code></td>\\n<td>调整窗口在屏幕中的位置</td>\\n<td><strong>通常无效</strong>，Headless 模式无实际屏幕坐标系统</td>\\n</tr>\\n<tr>\\n<td><code>fullscreen_window()</code></td>\\n<td>全屏隐藏浏览器 UI</td>\\n<td><strong>可能无效</strong>，无实际界面可操作</td>\\n</tr>\\n</tbody>\\n</table>","autoDesc":true}')},6995:(s,i)=>{i.A=(s,i)=>{const t=s.__vccOpts||s;for(const[s,a]of i)t[s]=a;return t}}}]);